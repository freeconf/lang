// This file was generated by meta.h.in. Only edit that file

#ifndef FC_META_H
#define FC_META_H

#include <stdbool.h>

typedef enum fc_encoding_id
{
{{- range .Meta.Definitions }}
  FC_{{ .Name | snake| uc -}} = {{ .EncodingId }},
{{- end }}
} fc_encoding_id;

typedef enum fc_optional_bool
{
  FC_BOOL_NOT_SET,
  FC_BOOL_TRUE,
  FC_BOOL_FALSE
} fc_optional_bool;

typedef struct fc_meta fc_meta;
typedef struct fc_meta_array fc_meta_array;
typedef struct fc_extension_array fc_extension_array;

struct fc_extension_array {
  struct fc_extension** extensions;
  size_t length;
};

// Casting things as fc_meta only works because the first several fields
// all align.  Poorman interface in C.
struct fc_meta {
    fc_meta* parent;
    fc_encoding_id encoding_id;
    char* ident;
    char* description;
    fc_extension_array extensions;
};

struct fc_meta_array {
  fc_meta** metas;
  size_t length;
};

{{ range .Meta.Definitions}}
typedef struct {{. | cDefType }} {
    fc_meta* parent;
{{- range .Fields }}
    {{. | cFieldType}} {{. | cName}};
{{- end }}
} {{. | cDefType }};
{{ end}}


// Casting things as fc_has_definitions only works because the first several fields
// all align.  Poorman interface in C.
typedef struct fc_has_definitions {
    fc_meta* parent;
    fc_encoding_id encoding_id;
    char* ident;
    char* description;
    fc_extension_array extensions;
    fc_meta_array definitions;
} fc_has_definitions;

fc_meta* fc_find_meta(fc_has_definitions* parent, char* ident);

#endif